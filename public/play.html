<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Video Player</title>
    <link href="https://vjs.zencdn.net/7.20.3/video-js.css" rel="stylesheet" />
    <link
      href="https://unpkg.com/video.js@7.20.3/dist/video-js.min.css"
      rel="stylesheet"
    />
    <link
      href="https://unpkg.com/@videojs/themes@1.0.0/dist/fantasy/index.css"
      rel="stylesheet"
    />
    <script src="https://vjs.zencdn.net/7.20.3/video.min.js"></script>
    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-12EDBKJZQ3"
    ></script>
    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1828915420581549"
      crossorigin="anonymous"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "G-12EDBKJZQ3");
    </script>
    <style>
      .video-js {
        margin: 0 auto;
        display: block;
        width: 100%;
        height: 100vh;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
    </style>
    <script>
      function extractTeraboxId(url) {
        // Extract ID from the end of the URL
        const matches = url.match(/[^\/]+$/);
        return matches ? matches[0] : null;
      }

      function loadVideoFromUrl() {
        const params = new URLSearchParams(window.location.search);
        const teraboxUrl = params.get("url");

        if (teraboxUrl) {
          // Extract ID and construct m3u8 URL
          const teraboxId = extractTeraboxId(decodeURIComponent(teraboxUrl));
          const videoUrl = `https://mdisksetup.shraj.workers.dev/m3u8?id=${teraboxId}`;

          const videoContainer = document.getElementById("video-container");
          videoContainer.style.width = "100%";
          videoContainer.style.display = "block";

          videoContainer.innerHTML = `
            <video id="video-player" class="video-js vjs-theme-fantasy" controls preload="auto">
              <source src="${videoUrl}" type="application/x-mpegURL">
            </video>
          `;

          videojs(document.getElementById("video-player"));
        } else {
          console.log("No video URL provided");
        }
      }

      window.onload = loadVideoFromUrl;
    </script>
  </head>

  <body>
    <div id="video-container"></div>

    <iframe
      id="iframe"
      src=""
      frameborder="0"
      style="width: 100%; height: 100vh"
      title="YouTube video player"
      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
      referrerpolicy="strict-origin-when-cross-origin"
      allowfullscreen=""
    ></iframe>

    <a
      style="display: none"
      href="https://visitorbadge.io/status?path=https%3A%2F%2Fwww.terabox.tech%2Fplay.html"
      ><img
        src="https://api.visitorbadge.io/api/combined?path=https%3A%2F%2Fwww.terabox.tech%2Fplay.html&countColor=%23263759&style=plastic"
    /></a>

    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1828915420581549"
      crossorigin="anonymous"
    ></script>
    <!-- terabox.tech1 -->
    <ins
      class="adsbygoogle"
      style="display: block"
      data-ad-client="ca-pub-1828915420581549"
      data-ad-slot="3363232456"
      data-ad-format="auto"
      data-full-width-responsive="true"
    ></ins>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
  </body>
</html>
